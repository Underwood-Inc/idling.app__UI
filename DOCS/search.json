---
layout: null
---
[
  {% assign search_items = "" | split: "" %}
  
  {% for page in site.pages %}
    {% unless page.exclude_from_search or page.url contains '/assets/' %}
      {% assign search_items = search_items | push: page %}
    {% endunless %}
  {% endfor %}
  
  {% for post in site.posts %}
    {% unless post.exclude_from_search %}
      {% assign search_items = search_items | push: post %}
    {% endunless %}
  {% endfor %}
  
  {% for item in search_items %}
    {
      "title": {{ item.title | default: "Untitled" | jsonify }},
      "content": {{ item.content | strip_html | strip_newlines | truncate: 1000 | jsonify }},
      "url": {{ item.url | jsonify }},
      "date": {{ item.date | date: "%Y-%m-%d" | jsonify }}
    }{% unless forloop.last %},{% endunless %}
  {% endfor %}
] 